{% extends 'base.html' %}
{% load static %}

{% block title %}Детали проекта: {{ project.title }}{% endblock title %}

{% block content %}
<h1>Детали проекта {{ project.title }}</h1>

<div>

    <div class="flex-r">

        <div class="project-detail-left card">
            <div class="space-between">
                <span class="tag-category">{{ project.category }}</span>
                <p class="project-date">Created on: {{ project.created }}</p>
            </div>
            <p><b>Срок</b>: {{ project.deadline }} <span class="tag-grey">осталось {{ project.days_remaining }}</span></p>
            <p><b>Руководитель</b>: {{ project.head }}</p>
            <p><b>Команда проекта</b>: 
                {% for mate in project.project_team.all %}
                    <ul>
                        <li>{{ mate.first_name }} {{ mate.last_name }} (@{{ mate.username }})</li>
                    </ul>
                    
                {% endfor %}
            </p>
            <p><b>Описание проекта</b>:</p>
            <div class="project-description">{{ project.description|safe|linebreaks }}</div>
            <a class="btn-primary" href="{%url 'project-update' project.id %}" style="margin-top: 1rem;">Редактировать проект</a>
        </div>

        <div class="project-detail-right">
            {% if project.get_tasks %}
                    <h3 style="margin-top: 0;">Задачи в этом проекте</h3>
                    {% for task in project.get_tasks %}
                        <div class="task">
                            <h4>{{ task.title }}</h4>
                            <p>{{ task.description }}</p>
                            <p class="project-date">{{ task.date_end }}</p>
                            <p class="status-{{ task.status }}"><b>Status: {{ task.status }}</b></p>
                            <p><a href="#" class="btn-primary">Edit</a></p>
                        </div>
                    {% endfor %}
            {% else %}  
                <div class="card">  
                    <h3 style="color: gainsboro;">В этом проекте пока нет задач.</h3>
                </div>
            {% endif %}
        </div>

    </div>
    




    


</div>



{% endblock %}


